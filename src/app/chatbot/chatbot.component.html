<div class="chatbot-overlay">
  <div class="chatbot-container">
    <div class="chatbot-header">
      <div class="header-content">
        <div class="bot-avatar">ðŸ¤–</div>
        <div class="bot-info">
          <h4>Support Assistant</h4>
          <span class="status">Online</span>
        </div>
      </div>
      <button class="close-button" (click)="onClose()" aria-label="Close chat">
        Ã—
      </button>
    </div>

    <div class="chat-messages">
      <div 
        *ngFor="let message of messages" 
        class="message"
        [ngClass]="{'user-message': message.isUser, 'bot-message': !message.isUser}"
      >
        <div class="message-avatar" *ngIf="!message.isUser">
          ðŸ¤–
        </div>
        <div class="message-content">
          <div class="message-text">{{ message.text }}</div>
          <div class="message-time">
            {{ message.timestamp | date:'HH:mm' }}
          </div>
        </div>
        <div class="message-avatar user-avatar" *ngIf="message.isUser">
          ðŸ‘¤
        </div>
      </div>

      <div *ngIf="isTyping" class="message bot-message typing-indicator">
        <div class="message-avatar">ðŸ¤–</div>
        <div class="message-content">
          <div class="typing-dots">
            <span></span>
            <span></span>
            <span></span>
          </div>
        </div>
      </div>
    </div>

    <div class="chat-input-container">
      <div class="quick-suggestions" *ngIf="messages.length === 1">
        <button 
          class="suggestion-button" 
          (click)="currentMessage = 'How does the redemption work?'; sendMessage()"
        >
          How does it work?
        </button>
        <button 
          class="suggestion-button" 
          (click)="currentMessage = 'I need help with my code'; sendMessage()"
        >
          Code help
        </button>
        <button 
          class="suggestion-button" 
          (click)="currentMessage = 'How do I submit feedback?'; sendMessage()"
        >
          Submit feedback
        </button>
      </div>

      <div class="input-area">
        <textarea
          [(ngModel)]="currentMessage"
          placeholder="Type your message..."
          class="chat-input"
          rows="1"
          (keydown)="onKeyPress($event)"
          [disabled]="isTyping"
        ></textarea>
        <button 
          class="send-button" 
          (click)="sendMessage()"
          [disabled]="!currentMessage.trim() || isTyping"
          aria-label="Send message"
        >
          <span class="send-icon">âž¤</span>
        </button>
      </div>
    </div>
  </div>
</div>
